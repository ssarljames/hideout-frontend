
<mat-form-field [appearance]="appearance" [class]="class">
  <mat-label>{{ label }}</mat-label>
  <mat-chip-list #chipList [placeholder]="label">
    <mat-chip
      *ngFor="let item of selectedItems"
      [selectable]="selectable"
      [removable]="removable"
      (removed)="remove(item.value)">
      {{item.label}}
      <mat-icon matChipRemove *ngIf="removable && disabled == false">cancel</mat-icon>
    </mat-chip>
    <input type="text" matInput [disabled]="true" *ngIf="disabled">
    <input (focus)="openDefault()"
      [placeholder]="placeholder"
      [ngClass]="{'d-none': disabled}"
      #searchInput
      [formControl]="search"
      [matAutocomplete]="auto"
      [matChipInputFor]="chipList"
      [matChipInputSeparatorKeyCodes]="separatorKeysCodes">
  </mat-chip-list>
  <mat-autocomplete  [autoActiveFirstOption]="autoActiveFirst"  #auto="matAutocomplete" (optionSelected)="selected($event)">


    <mat-option *ngFor="let option of options" [value]="option.value">
      {{option.label}}
    </mat-option>
    <mat-option class="text-muted" *ngIf="options.length == 0 && isLoading == false && searchInput.value" [disabled]="true" [value]="null">
      No result for <i class="text-dark">{{ searchInput.value }}</i>
    </mat-option>
    <mat-option class="text-muted" *ngIf="isLoading && searchInput.value" [disabled]="true" [value]="null">
      Searching for <i class="text-dark">{{ searchInput.value }}</i>
    </mat-option>

    <mat-option [value]="'---add-entry'" *ngIf="allowAddEntry && search.value && options.length == 0 && isLoading == false">
      <mat-icon>add</mat-icon>
      Add
    </mat-option>

  </mat-autocomplete>
  <mat-icon matSuffix>search</mat-icon>
</mat-form-field>
